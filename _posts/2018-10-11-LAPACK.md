---
layout: default
comments: true
title: Using LAPACK in C on LINUX
---
## LAPACK
Instruction for using LAPACK in c on linux

### Installation
* Download latest version from http://www.netlib.org/lapack/.
* Uncompress tar file.
* `$cd lapack-*/`
* `$cmake ./`
* Move 'lapacke', 'lapack', 'blas', 'cblas' librarys (files ends with .a) to some 'lib/' you are familiar with, and rename them as 'liblapacke.a', 'liblapack.a', 'libblas.a', 'libcblas.a'. (If you are not going to use functions in cblas, just ommit 'cblas') 

### Test
* Get test program from http://www.netlib.org/lapack/lapacke.html.
* Compile with `$gcc test_lapack.c -L lib/ -llapacke -llapack -lblas -lgfortran -lm -I include/ -o test_lapack` 
* Use `$gcc test_lapack.c -L lib/ -llapacke -llapack -lcblas -lblas -lgfortran -lm -I include/ -o test_lapack` if you are using functions in cblas.
      
### Documentation
* http://www.netlib.org/lapack/explore-html/index.html.
* This documentation have specific defination for all lapack functions. But, if you want to use some function 'f()' in lapack, you should use 'LAPACKE_f()' or 'cblas_f()', you can see parameters of 'LAPACKE_f()' or 'cblas_f()' in this documentation as well, but there are no details. It might be hard to find how to use 'LAPACKE_f()' or 'cblas_f()' properly, one possible way is to test different combinations of parameters especially for parameters 'N', 'M', 'LDA', 'LDB'.

### Functions
* cblas_dtrsm  
`void cblas_dtrsm (const CBLAS_LAYOUT layout, const CBLAS_SIDE Side, const CBLAS_UPLO Uplo, const CBLAS_TRANSPOSE TransA, const CBLAS_DIAG Diag, const int M, const int N, const double alpha, const double \*A, const int lda, double \*B, const int ldb)`   
      - `layout`: `CblasRowMajor` or `CblasRowMajor`   
      - `Side`: `CblasLeft` or `CblasRight`, same meaning as `SIDE` in `dtrsm()`  
      - `Uplo`: `CblasLower` or `CblasUpper`, same meaning as `UPLO` in `dtrsm()`  
      - `TransA`: `CblasNoTrans` or `CblasTrans`, same meaning as `TRANSA` in `dtrsm()`  
      - `Diag`: `CblasNonUnit` or `CblasUnit`, same meaning as `DIAG` in `dtrsm()`  
      - `alpha`: same meaning as `ALPHA` in `dtrsm()`  
      - `A`: same meaning as `A` in `dtrsm()`  
      - `B`: same meaning as `B` in `dtrsm()`  
If you are using `CblasRowMajor`, and `A` is a square matrix:  
      - `M`: length of each edge of `A`  
      - `N`: number of columns in `B`  
      - `LDA`: the same as `M`  
      - `LDB`: the same as `N`  

### FAQ
* What is LDA? (http://icl.cs.utk.edu/lapack-forum/viewtopic.php?f=2&t=1897)
> On LDA, the doc says:
>
> * LDA (input) INTEGER
> * The leading dimension of the array A. LDA >= max(1,N).
>
> Now N is the number of columns in the input matrix. But the input matrix is symmetric, so we'd expect it to be N x N, right? In that case LDA = N. The ">=" part in the comment just allows for the possibility that the input matrix A is in fact part of a larger array, with a greater number of rows than are actually used in this function. But unless you're doing something tricksy, "LDA" is just the rows of A, and equals N.


{% if page.comments %}
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://blog-of-ke-liu.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
{% endif %}
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
